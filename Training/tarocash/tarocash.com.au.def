/*startearly_code-->

cbar_startearly = true;
	
var cbar_max_wait = 0;
var cbar_default_max_wait = 0;


cbar_hold_execution= function (){
	
	cbar_max_wait++;   
    if (cbar_max_wait > 25) return false;    
    if (typeof (jQuery) == "undefined") return true;
    
    //All pages
    cbar_temp = cbar_Sizzle("#root");
    if (cbar_temp.length == 0) {
        return true; // wait 
    }
    
    
     //Cart page
    if (window.location.href.toLowerCase().search('/checkout')>-1) {
        cbar_temp = cbar_Sizzle('div[class^="checkoutApp-"]')
        if(cbar_temp.length == 0){
    		 return true; // wait 
    	}
        
    }
    
    cbar_temp124 = cbar_Sizzle ('.loading-2oE');
    if(cbar_temp124 > 0 ){
         return true; // wait 
    }
   
   
    if (window.location.href.toLowerCase().search('/checkout') == -1  && cbar_url.toLowerCase().search('/order-confirmation') == -1) {
        cbar_temp = cbar_Sizzle('#root main#main')
        if (cbar_temp.length == 0) {
            return true; // wait 
        } 
        
        //Product page
        cbar_temp12 = cbar_Sizzle ('div[class^="productContainer-"]');
        if (cbar_temp12.length > 0) {
           cbar_temp1 = cbar_Sizzle ('section[class^="cartActions-"]');
            if (cbar_temp1.length == 0) {
                return true; // wait 
            }
            
            //cbar_temp = cbar_Sizzle('div[class^="reviewsContainer-"][data-bv-product-id]');
            //if(cbar_temp.length == 0){
            //    return true; // wait 
            //}
        }
         
        // by default it waits for 2.5 sec 
        if (cbar_default_max_wait > 4) return false;  
        if(cbar_default_max_wait < 5) {
            cbar_default_max_wait++
            return true;
        }
    }
    
      
	return false;

}

<--startearly_code*/

cbar_sid 			= 51493; 
cbar_dev_site 		= false;
cbar_cookiedomain = ".tarocash.com.au";

if (cbar_url.toLowerCase().search('tcff-uat.ns-staging.com.au')>-1)
{
  cbar_cookiedomain = '.ns-staging.com.au';
  cbar_dev_site = true;
  cbar_ro = true;
}
if(cbar_url.toLowerCase().search('tarocash.borderfree.com')>-1)
{
	cbar_cookiedomain = '.borderfree.com';
}	

cbar_widget_show	= false;	//turn this on (set to true) only when ready for production, otherwise use widget_show=true as URL parameter to view the widgets in test mode
cbar_widget 		= true;		//required for widgets
cbar_num_widgets	= 3			//Set number of widgets in a page

//cbar_catmode 		= 2;		//not required in new scraping mode.
cbar_encode 		= '';		//set according to the encoding of the website. eg utf-8

// General associating variables
var cbar_temp		= '';
var cbar_temp2 		= '';
var cbar_match		= '';
var cbar_pattern 	= '';
var cbar_arr 		= '';
cbar_c_from_p		= true;

cbar_md = true;  





//handle urls with google translation as read only

if(cbar_url.toLowerCase().search('translate.googleusercontent.com')>-1) cbar_ro=true;

//##replace it with actual domain name.

if(document.location.hostname.toLowerCase().search('tarocash.com.au|tarocash.borderfree.com') == -1) cbar_ro = true;


cbar_oos = 2;



// Widget titles
cbar_recstep_titles = []; // required temporarily
cbar_recstep_titles[1]		= "Customers Who Viewed This Product Also Viewed";
cbar_recstep_titles[2]		= "Top Sellers";
cbar_recstep_titles[3]		= "Recently Viewed"
cbar_recstep_titles[4]		= "Customers Who Bought This Product Also Bought";
cbar_recstep_titles[5]		= "You Might Also Like";
cbar_recstep_titles[6]		= "Recommended For You";
cbar_recstep_titles[7]		= "Customers Who Bought This Product Also Bought";
cbar_recstep_titles[8]		= "Bestsellers";
cbar_recstep_titles[9]		= "Customers With Similar Searches Also Viewed";
cbar_recstep_titles[10]		= "Customers Who Bought Products You Own Also Bought";
cbar_recstep_titles[11]		= "Recommended For You";
cbar_recstep_titles[12]		= "Top Sellers From Recent Categories You Visited";
cbar_recstep_titles[13]		= "Recommendations Based On Your Google Search";
cbar_recstep_titles[19]		= "What Other Customers Are Buying Right Now";
cbar_recstep_titles[18]		= "What do customers ultimately buy after viewing this item?";
cbar_recstep_titles[100]	= "You Might Also Like";
cbar_recstep_titles[23]		= "Product Recommendations";



// determines the widget that are shown on the pages. Required for display of widgets. 
//Can be different from site to site. Below cbar_flow displays "Recently Viewed" items in the widget.
//cbar_flow="H0:1,4,3,13,10.0.0.0.0.1,5.9,12,8;H1:1,0,0,0,0;P0:1,2,3,13,1,5,2;P1:1,2,4.4,4.2,2;C0:1,2,3,13,5.0,2.0;C1:1,0,0,0,0;Sc0:1,2,3,7.4,7.2.0.0.7,11.4,11.2.0.0.7;Sc1:1,0,0,0,0";

//standard flow
//cbar_flow="H0:1-1,8-20,13,5.9.0.6,12.0.0.6,8.0.0.6;H1:1,0,0,0,0;P0:1-1,4-8,13,1,22.0.0.1.9,5,2;P1:1,2,4.4,1.4.0.11,2;C0:1,2-9,13,5.0,2.0,3;C1:1,0,0,0,0;Sc0:1-1,4,7.4.0.0.7,7.2.0.0.1,11.4,3;Sc1:1,0,0,0,0";

cbar_flow="H0:1-1,4-12,10.0.0.8.0.1,5.9.0.8,12.0.0.8,8;H1:1,0,0,0,0;P0:1-1,4-8,1,22.0.0.1.9,5.0.0.1,2.0.0.1;P1:1-1,1,0;P2:1-1,4,4.4,4.2,1.4.0.11,1.2.0.11;C0:1-1,4-8,5.7,2.7,5.6,2.6,5.0,2.0;C1:1,0,0,0,0;Sc0:1-1,1,3;Sc1:1,0,0,0,0;S0:1,4-12,9,5.9;";


cbar_nz_site = false;
if(cbar_url.toLowerCase().search('/nz/') > -1)
{
	cbar_nz_site = true;

}

//New Mode: reset extra variables with a space to support new mode (in new mode , empty fields do not get updated)
//cbar_extra1=" "; //deal with old price that has been removed
//cbar_extra2 = " "; 	
//cbar_extra3 = " "; 	

 
cbar_after_load = function  (cbar_mode){

if ( cbar_mode == 'widget') {
	for (var group_ctr=0; group_ctr < cbar_results.length; group_ctr++){
		for (var t=0; t < cbar_results[group_ctr].length ; t++){
			
			//decode extra vars
			cbar_results[group_ctr][t][16] = decodeURIComponent(cbar_results[group_ctr][t][16]);
			cbar_results[group_ctr][t][17] = decodeURIComponent(cbar_results[group_ctr][t][17]);
			cbar_results[group_ctr][t][18] = decodeURIComponent(cbar_results[group_ctr][t][18]);
			cbar_results[group_ctr][t][23] = decodeURIComponent(cbar_results[group_ctr][t][23]);
			
			//trim spaces in extra variables.
			cbar_results[group_ctr][t][16] = cbar_results[group_ctr][t][16].replace(/^\s+|\s+$/g,'');
			cbar_results[group_ctr][t][17] = cbar_results[group_ctr][t][17].replace(/^\s+|\s+$/g,'');
			cbar_results[group_ctr][t][18] = cbar_results[group_ctr][t][18].replace(/^\s+|\s+$/g,'');
			cbar_results[group_ctr][t][23] = cbar_results[group_ctr][t][23].replace(/^\s+|\s+$/g,'');
			
				
		 	cbar_img_link = decodeURIComponent(cbar_results[group_ctr][t][1]).split("?");
			if(cbar_img_link.length)
			{
				cbar_results[group_ctr][t][1] = cbar_img_link[0];		
			}						
					
			if(cbar_results[group_ctr][t][4] != '')
			{
				cbar_results[group_ctr][t][4] = decodeURIComponent(cbar_results[group_ctr][t][4]);
			}		
				
			if(cbar_results[group_ctr][t][3] != '')				
			{
			  if(cbar_url.toLowerCase().search('tcff-uat.ns-staging.com.au')>-1)
			  {
				cbar_results[group_ctr][t][3] = (decodeURIComponent(cbar_results[group_ctr][t][3])).replace('www.tarocash.com.au','tcff-uat.ns-staging.com.au');			
			  }	
			}	
			if(cbar_nz_site)
			{
			  if(cbar_results[group_ctr][t][3] != '')
			  {
				cbar_results[group_ctr][t][3] = (decodeURIComponent(cbar_results[group_ctr][t][3])).replace('/au/','/nz/');	
			  }
			  if(cbar_results[group_ctr][t][18] != '')
			  {
				cbar_results[group_ctr][t][4] = decodeURIComponent(cbar_results[group_ctr][t][18]);
			  }
			  if(cbar_results[group_ctr][t][16] != '')
			  {
				cbar_results[group_ctr][t][16] = decodeURIComponent(cbar_results[group_ctr][t][23]);
			  }
			  
			  
			}
			
			// fix bug in safari (price turns from $15.5 to 5.5)
			if(cbar_BrowserDetect.browser.toLowerCase() == "safari"){
				cbar_results[group_ctr][t][4] = cbar_results[group_ctr][t][4].replace ('$','&#36;');
				cbar_results[group_ctr][t][16] = cbar_results[group_ctr][t][16].replace ('$','&#36;');
			}

		}
		
			
	}
}
	
} // end


cbar_after_show = function  (mode) {

	if (mode == 'widget')
	{ 
		for (var group_ctr=0; group_ctr < cbar_results.length; group_ctr++)
		{
			for (var t=0; t < cbar_results[group_ctr].length ; t++)
			{
				tmp = cbar_Sizzle("");	//hide default widget if any
				if(tmp.length>0 && group_ctr==0){
					tmp[0].style.display="none";
				}
				
				//display old price if any in extra1 var
				if (cbar_results[group_ctr][t][16] != "") { //if extra1 is not empty
					tmp = cbar_Sizzle('div#cbar_w'+ group_ctr +'_'+t+'_item_xtr1_s');					
					if(tmp.length){
						tmp[0].style.display="";
					}
				}
				
			
			   if(cbar_pagetype == "P" || cbar_pagetype == "H" || cbar_pagetype == "Sc" || cbar_pagetype == "O" || cbar_pagetype == "C" || cbar_pagetype == "S")
			   {		   
					if (cbar_results[group_ctr][t][16] != " " && cbar_results[group_ctr][t][16] != "") 
					{ 
						//if extra1 doesnot contain blank value
						tmp = cbar_Sizzle('#cbar_w'+ group_ctr +'_'+t+'_item_xtr1_s');					
						if(tmp.length)
						{
							tmp[0].style.display="";
						}
					}
					else
					{
					  tmp = cbar_Sizzle('#cbar_w'+ group_ctr +'_'+t+'_item_price_s');					
						if(tmp.length)
						{
							jQuery(tmp).removeClass('special-price');
						}
					}	
					 if(cbar_results[group_ctr][t][10] == 1)
					 {
						jQuery('div#cbar_w'+ group_ctr +'_'+t+'_label_wrapper').append('<span class="new">New</span>');	//label-manager-wrapper 
					 }
					 else if(cbar_results[group_ctr][t][11] == 1)
					 {
						jQuery('div#cbar_w'+ group_ctr +'_'+t+'_label_wrapper').append('<span class="sale">Sale</span>');
					 }
					 else
					 {
					   jQuery('div#cbar_w'+ group_ctr +'_'+t+'_label_wrapper').hide();
					 }			  
				  
			   } 
			
				
				
			}
		}
		
		
		if(cbar_pagetype == 'H')
		{
			if(cbar_results.length && cbar_widget_show == true){
			  if(cbar_results[0].length){
				cbar_temp = cbar_Sizzle('.home-new-arrivals-container .page-products');
				if(cbar_temp.length)
				{
					cbar_temp[0].style.display = "none";
				}
			}				
		  }
		} 
		
		if(cbar_pagetype == 'P')
		{
		  if(cbar_results.length && cbar_widget_show == true){
		       if(cbar_results[0].length){
    			    //jQuery(".upsell-recent-wrapper .products-upsell:not(#cbar_widget0").first().hide()
    			    cbar_temp = cbar_Sizzle(".widget.block .tagalys-managed-widths")
    				cbar_temp1 = cbar_Sizzle(".widget.block .tagalys-prev-next-links")
    				if(cbar_temp.length && cbar_temp1.length) {
    					cbar_temp[0].style.display = "none";
    					cbar_temp1[0].style.display = "none";
    				}
    		   }
    		   
    		   if(cbar_results[1].length){
    			    cbar_temp = cbar_Sizzle("#cbar_widget1")
    				if(cbar_temp.length>0) {
    					cbar_temp[0].style.display = "none";
    				}
    		   }
    		   
    		   //Hide add to cart popup
    		   if(cbar_results[2].length){
    				cbar_temp1 = cbar_Sizzle(".product-info-main #tagalys-namespace");
    				if(cbar_temp.length) {
    					cbar_temp[0].style.display = "none"; 
    				}
    				cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 0px) {.product-info-main #tagalys-namespace', 'display:none}');
    		   }
			  
			  /*
			  if(cbar_results[1].length && cbar_results[0].length == 0){ 
				cbar_temp = jQuery('.upsell-recent-wrapper .block-recent .block-title')				
				if(cbar_temp.length)
				{
					jQuery('.upsell-recent-wrapper .block-recent .block-title').trigger('click');
				}
				
			  }*/
		   }
		}
		
		
		if( cbar_pagetype == "O" )
		{
			if( cbar_results[0].length > 0 )
			{
				if( typeof(jQuery) )
				{
					jQuery('.upsell-recent-wrapper .block-recent .block-title').trigger('click');
				}
			}
		}
		
	}
} //end


cbar_ga_eventtrack = function(link,category,action,opt_label){

  if (typeof(ga) != 'undefined') {
	  var tracker = ga.getAll()[0].get('name') + '.send';				
	  ga(tracker,'event', category, action, opt_label);
	  return;
  }
  
   else if (typeof(_gaq) != 'undefined') {
	  _gaq.push(['_trackEvent', category, action, opt_label]);
	  return;
  }    	
  
}

jQuery("#cbar_mq_css").remove();
	
cbar_mq_css = (function(id) {
		
		// Create the <style> tag				
		var style = document.createElement("style");

		// Add a media (and/or media query) here if you'd like!
		// style.setAttribute("media", "screen")
		//style.setAttribute("media", "@media only screen and (max-width : 1024px)")
		
		style.setAttribute('id',id);
		//style.setAttribute("media", media_query)

		// WebKit hack :(
		style.appendChild(document.createTextNode(""));

		// Add the <style> element to the page
		document.head.appendChild(style);
		
		return style.sheet;
		
})('cbar_mq_css');	

cbar_mq_addCSSRule = function(sheet, selector, rules, index) {
	if(typeof index=='undefined')index=0;
	
	try
	{
		if(sheet.insertRule) {
			sheet.insertRule(selector + "{" + rules + "}", index);
		}
		else {
			sheet.addRule(selector, rules, index);
		}
	}
	catch(e)
	{
		if(window.console) console.log('Bari: Failed to add CSS');
		//alert("Failed"+ e.message);
	}
}



  /*
    * Reset  variables 
    */
    cbar_url= window.location.href;
	cbar_url_en = encodeURIComponent(cbar_url);
	cbar_pagetype = "U";
	cbar_pur_pids = [];
	cbar_pur_qtys = [];
	cbar_w_anchor = [];
	cbar_crt = '';
	cbar_crtn = '';
	cbar_pur_mode = 0;	
	cbar_pid = '';
	cbar_cid = '';	
	cbar_filter_val = '';
	cbar_cname = '';
	cbar_cids_p = '';
	cbar_oos_page = '';
	cbar_search = '';
	cbar_home = false;
	cbar_is_pur = false;
	cbar_pur_com = false;
	cbar_log = '';
	cbar_completed= null;
	cbar_userinfo= [];
	cbar_check_cart = function () {return false;}
	cbar_completed_run = function(){return;}();
	cbar_delayed_action = []; //reset delayed actions like popups
	 
if (typeof (cbar_previous_url) == 'undefined') cbar_previous_url = window.location.href;

cbar_url_watcher = function () {
    if (window.location.href != cbar_previous_url) {
		cbar_previous_url = window.location.href;
		window.clearInterval(cbar_url_watcher_interval);
		if (window.console) console.log('bari: page change');
        window.setTimeout(function () {
            cbar_alreadyrunflag = false;
			cbar_max_wait = 0;
			cbar_default_max_wait = 0;
			cbar_start();

		}, 3000); // page loads with delay
    }
}


if (typeof (cbar_url_watcher_interval) != 'undefined') window.clearInterval(cbar_url_watcher_interval);
cbar_url_watcher_interval = window.setInterval(cbar_url_watcher, 500);

	
// Home page scraping
if (document.location.pathname=='/' || document.location.pathname.replace(/\/+$/g,'') == '/au' || document.location.pathname.replace(/\/+$/g,'') == '/nz') 
{
	cbar_home=true;
}	

	
	
// Category page scraping . Scrape for cid and cname(optional)
cbar_temp1 = cbar_Sizzle('div[class^=categoryContent-]')
cbar_temp = cbar_Sizzle('div[class^=productGallery-] div[class^=productCard-]')
if (cbar_temp.length > 0 && cbar_temp1.length > 0) {    
	
	/*cbar_temp = cbar_Sizzle('.breadcrumbs ol li');	
	//cbar_temp.shift();
	if(cbar_temp.length > 1)
	{
		cbar_cid = cbar_temp[1].innerText.toLowerCase().replace(/^\s+|\s+$/g,"");
		cbar_cname = cbar_cid;
		//cbar_cids_p = cbar_temp[0].innerHTML.toLowerCase(); 
	}*/
	
	cbar_cid = "dummy";

 }


// Product page scraping
cbar_temp = cbar_Sizzle ('div[class^="productContainer-"] section[class^="cartActions-"]');
if (cbar_temp.length>0){		
			
		
		cbar_temp = cbar_Sizzle('div[class^="reviewsContainer-"][data-bv-product-id]');
		if(cbar_temp.length) {
			cbar_pid_temp = cbar_temp[0].getAttribute('data-bv-product-id');
		    if(cbar_pid_temp !== null && cbar_pid_temp !== '') {
		     cbar_pid =  cbar_pid_temp.replace("SKU:",'').replace(/^\s+|\s+$/g,"").toLowerCase();
		    }
        }
		
		if(cbar_pid === '') {
    		cbar_temp = cbar_Sizzle('div.sku-oTJ');
    		if(cbar_temp.length)
    		{
    		  cbar_pid_temp = cbar_temp[0].innerText;
    		  if(cbar_pid_temp !== '') {
    		     cbar_pid =  cbar_pid_temp.replace("SKU:",'').replace(/^\s+|\s+$/g,"").toLowerCase();
    		  }
    		}
		}
		
		if(cbar_pid === '') {
            if(typeof(dataLayer) != "undefined"){
                for (var key = dataLayer.length; key >= 0; key--) {
                  	if(typeof(dataLayer[key]) != "undefined" && typeof(dataLayer[key][0]) != "undefined" &&  (dataLayer[key][0] == "event") && (dataLayer[key][1] == "page_view") && 
                	(typeof(dataLayer[key][2].items) != "undefined")  && typeof (dataLayer[key][2].items[0]) != "undefined" && typeof (dataLayer[key][2].items[0].id) != "undefined") 
                    {
                		cbar_pid = dataLayer[key][2].items[0].id; 
                		cbar_pid = cbar_pid.toLowerCase();
                		break;
                	} 			
                }
            }
		}
		 
		    
		/*    
		if(cbar_pid === '') { // detect product pages to run OP rules
		    cbar_pid = 'dummy';
		}*/

			// rest data from the feed.			
		// rest data from the feed.			
		//end product page	


}	
//Search page scraping
if ((cbar_url.toLowerCase().search('/search')>-1) && (cbar_url.toLowerCase().search('page=')> -1)){

	cbar_search=cbar_gup('query');	//scrape the search keyword. generally from url parameter
}

// ajax cart
/*
if (cbar_pid || cbar_cid || cbar_home || cbar_url.toLowerCase().search('catalogsearch/result')>-1) {
	if (cbar_url.toLowerCase().search('checkout') == -1){
		
		cbar_check_cart = function()
		{
			var price = 0;
			cbar_temp = cbar_Sizzle('#minicart-content-wrapper .subtotal .price-wrapper .price');
			if(cbar_temp.length)
			{
				price_tmp = cbar_temp[0].innerHTML.match(/[0-9.,]+/);
				if(price_tmp != null && price_tmp.length > 0)
				{
					price = price_tmp[0];
				}
			}	
			return price;
		}
			
		cbar_scrape_ajax_cart = function()
		{		
			cbar_pur_pids	= [];	//stores either product ids (recommended) or product names or products in cart
			cbar_pur_qtys	= [];	//quantity of each product in cart
					
			var cbar_temp = cbar_Sizzle('#mini-cart li.product-item .product-item-details');
			
			for (var nodei=0; nodei < cbar_temp.length; nodei++){
				pid_tmp = cbar_temp[nodei].getAttribute('productid');
				if(pid_tmp != null)
				{
					cbar_pur_pids.push(pid_tmp.toLowerCase());	
				}	
			}

			var cbar_temp = cbar_Sizzle('#mini-cart .product-item-details .details-qty span');
			for (var nodei=0; nodei < cbar_temp.length; nodei++){
				qty_tmp = cbar_temp[nodei].innerHTML;
				cbar_pur_qtys.push(qty_tmp);	//push product qty	
			}			
		}

	}
}*/

// Shopping Cart scraping.
/*if (cbar_url.toLowerCase().search('checkout/cart')>-1) {

	
			//cbar_pur_mode	= 1;	//Turn this on when sending items list by product names, instead of product ids (recommended)

			cbar_is_pur		= 1;
			
			//cbar_crtn 		= 0;	//the number of different items in the cart and not their quantities.
			
			cbar_pur_pids	= [];	//stores either product ids (recommended) or product names or products in cart
			cbar_pur_qtys	= [];	//quantity of each product in cart
			
			
			
			var cbar_temp = cbar_Sizzle('#shopping-cart-table tbody .product-item-details');
			for (var nodei=0; nodei < cbar_temp.length; nodei++){
				pid_tmp = cbar_temp[nodei].getAttribute('productid');
				if(typeof(pid_tmp) != "undefined")
				cbar_pur_pids.push(pid_tmp.toLowerCase());	//push product id/name. Make sure PIDs are lowerCased if they are 
			}
			
			var cbar_temp = cbar_Sizzle('#shopping-cart-table tbody .qty select[id ^= "cart-"] option:selected');
			for (var nodei=0; nodei < cbar_temp.length; nodei++){
				qty_tmp= cbar_temp[nodei].value;
				cbar_pur_qtys.push(qty_tmp);	//push product qty	
			}
			
			//coupon code handling...
	cbar_temp = cbar_Sizzle ('input[name="coupon_code"]');
	if (cbar_temp.length>0){
		cbar_cou_input= cbar_temp[0];
	}
			
	
}*/	
cbar_temp = cbar_Sizzle('div[class^="checkoutApp-"]')
if (cbar_temp.length > 0 && cbar_url.toLowerCase().search('/checkout')>-1) {

	//cbar_pur_mode	= 1;	//Turn this on when sending items list by product names, instead of product ids (recommended)

	cbar_is_pur		= 1;
	
	//cbar_crtn 		= 0;	//the number of different items in the cart and not their quantities.
	
	cbar_pur_pids	= [];	//stores either product ids (recommended) or product names or products in cart
	cbar_pur_qtys	= [];	//quantity of each product in cart
	
	
	
	var cbar_temp = cbar_Sizzle('');
	for (var nodei=0; nodei < cbar_temp.length; nodei++)
	{
		pid_tmp = cbar_temp[nodei].href.match(/\/([^\/]*).html/);		
		if(pid_tmp != null && pid_tmp.length > 1)
		{
			cbar_pur_pids.push(pid_tmp[1].toLowerCase());	//push product id/name. Make sure PIDs are lowerCased if they are alpha-numeric			
		}
	}
	
	var cbar_temp = cbar_Sizzle('');
	for (var nodei=0; nodei < cbar_temp.length; nodei++){
		qty_tmp= cbar_temp[nodei].value;
		
		cbar_pur_qtys.push(qty_tmp);	//push product qty
			
	}
	
	//Scrape the cart total
	
	// !!!! Important: if cbar_crt is scraped make sure to scrape cbar_crtn & vice-versa !!!!
	
	/*cbar_temp = cbar_Sizzle('');	
	if (cbar_temp.length>0){
		cbar_crt = cbar_temp[0].innerHTML.replace(",",'');
	}*/	
	
	//coupon code handling...
	cbar_temp =cbar_Sizzle ('input[name="coupon_code"]');
	if (cbar_temp.length>0){
		cbar_cou_input= cbar_temp[0];
	}
	
}


//end shopping cart	


//coupon code callbacks

// ONLY USE WHEN THERE IS PAGE REFRESH IN COUPON SUBMISSION
cbar_before_cou_inj = function (input){
    // avoid infinite loop when injecting coupon causes page refresh
    var coupon_injected = cbar_readCookie('cbar_cou_inj' );
    if ( (coupon_injected==null) || (coupon_injected=="false") ) {
        cbar_createCookie('cbar_cou_inj',true );
        return true;
    }
    else {
        cbar_createCookie('cbar_cou_inj',false );
        return false; // don't inject
    }

}


   
cbar_after_cou_inj = function (input){	
	
	window.onbeforeunload = null;  // prevent leaving page events by the coupon apply page refresh (use only when coupon refreshes page)
		
	jQuery("#discount-coupon-form button.apply").trigger('click');	
	
}	
//end coupon code callbacks


// Scrape email inputs. We scrape all the possible email inputs as an array from checkout, login or register pages
if(cbar_url.toLowerCase().search('customer/account/login') > -1) { 
	
	cbar_e_input = cbar_Sizzle("input#email,input#email_address");
	cbar_e_com=true;	
	
} 
if(cbar_url.toLowerCase().search('au/checkout|nz/checkout') > -1)
{
	cbar_waitforelement("input#customer-email",
		function(elements){	
			cbar_em_listen(elements[0]);
			cbar_e_com = true;		
	});
}


//end email
		


// Thank You Page scraping. (possible only after purchase is made)
if  (cbar_url.search('/order-confirmation')>-1) {  
	
	cbar_is_pur		= 1;			
	cbar_pur_com	= true;	//actual buy took place
	
} // end thank you


// Widgets Begin
 
cbar_is_mobile_view = false;
if( typeof(jQuery) != "undefined")
{
	if(jQuery(window).width() < 768)
	{
		cbar_is_mobile_view = true;
	}
}

//common widget variables
cbar_w_title_len	= 50;	//max length of product titles displayed on widget.

//example  Home Page Widget (simple widget)

if (cbar_home){
	
	cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 769px) {#cbar_widget0 .product-item', 'width:25%}');
	cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (max-width: 768px) {#cbar_widget0 .product-item', 'width:50%}');
		
		
		if(cbar_is_mobile_view)
		{
			cbar_temp = cbar_Sizzle(".segment.c-50.mobile");	
		}else{
			cbar_temp = cbar_Sizzle(".segment.c-50.desktop");
		}
		 
		if(cbar_temp.length)
		{
			cbar_w_anchor[0]=cbar_temp[0];
		}
	
		cbar_w_insert_where[0] 	= 1; 	//determines the position of widget with reference to anchor element possible values 0 = after the anchor, 1= before the anchor, 2= inside the anchor
				 
		cbar_numicons1		 	= 4; 	//tells how many items are actually in the widget	(for first scrolling widget you suffix the the variable with 1, for second widget, suffix with 2)
		cbar_w_scrollbuttons	= false;	//scrolling widget.
		 
		// styles
		cbar_w0_wrap_s				= 'margin: 0 0px 50px; clear: both; display: inline-block;';
		cbar_w0_header_s			= '';
		cbar_w0_items_s				= '';
		cbar_w0_item_s				= 'padding:0 15px;margin:0;';
		cbar_w0_item_a_s			= '';
		cbar_w0_item_img_s			= '';
		cbar_w0_item_perc_pur_s		= '';
		cbar_w0_item_perc_pur2_s	= '';
		cbar_w0_item_title_s		= '';
		cbar_w0_item_xtr1_s			= '';
		cbar_w0_item_xtr1_in_s		= '';
		cbar_w0_item_price_s		= '';
		cbar_w0_item_price_in_s		= '';
		cbar_w0_item_xtr2_s			= '';
		cbar_w0_item_xtr2_in_s		= '';
		cbar_w0_item_xtr3_s			= '';
		cbar_w0_item_xtr3_in_s		= '';

		
		
		
		//widget head
		cbar_w_template_head[0]='<div  id="cbar_widget0" style="'+cbar_w0_wrap_s+'" class="block-new-products"><div id="cbar_w0_header_s" style="'+cbar_w0_header_s+'" class="block-title"><strong>%group_title%</strong></div>'+
		'<div id="cbar_w0_items_s" style="'+cbar_w0_items_s+'" class="block-content">'+
		'<div class="products-grid grid">'+
		'<div class="products list items product-items">';
		

		//widget items
		cbar_w_item_template[0]='<div id="cbar_w0_%t%_item_s" style="'+cbar_w0_item_s+'" class="item product product-item">'+
				'<div id="cbar_w0_%t%_label_wrapper" class="label-manager-wrapper"></div>'+
				'<div class="product-item-info">'+				
				'<a id="cbar_w0_%t%_item_a_s" style="'+cbar_w0_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product photo product-item-photo">'+				
				'<picture>'+
					'<source  srcset="%picture%?w=296&h=419&bg=f1f1f1&cs=tinysrgb&fm=jpg&rect=440,0,2120,3000&auto=format,compress&q=75&ch=Width,DPR 1x, %picture%?w=296&h=419&bg=f1f1f1&cs=tinysrgb&fm=jpg&rect=440,0,2120,3000&auto=format,compress&q=75&dpr=2&ch=Width,DPR 2x,	%picture%?w=296&h=419&bg=f1f1f1&cs=tinysrgb&fm=jpg&rect=440,0,2120,3000&auto=format,compress&q=75&dpr=3&ch=Width,DPR 3x">'+
					'<img id="cbar_w0_%t%_item_img_s" style="'+cbar_w0_item_img_s+'" class="photo image" src="" width="242" height="342" alt="">'+
				'</picture>'+							
				'</a>'+				
				'<div  id="cbar_w0_%t%_item_perc_pur_s"  style="display:none; '+cbar_w0_item_perc_pur_s+'">%perc_purchased%% buy:</div>'+ // % purchased this item
				'<div  id="cbar_w0_%t%_item_perc_pur2_s"  style="display:none; '+cbar_w0_item_perc_pur2_s+'">%perc_purchased%% buy the item featured on this page:</div>'+ // % purchased item on this page
				'<strong  id="cbar_w0_%t%_item_title_s"  style="'+cbar_w0_item_title_s+'" class="product name product-item-name"><a id="cbar_w0_%t%_item_a_s" style="'+cbar_w0_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product-item-link">%title%</a></strong>'+
				'<div class="price-box price-final_price">'+
				'<div  id="cbar_w0_%t%_item_price_s"  class= "price-container price-final_price tax weee" style="'+cbar_w0_item_price_s+'"><span id="cbar_w0_%t%_item_price_in_s" style="'+cbar_w0_item_price_in_s+'" class="price bfx-price">%price%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr1_s"  style="display:none; '+cbar_w0_item_xtr1_s+'" class="old-price"><span id="cbar_w0_%t%_item_xtr1_in_s" style="'+cbar_w0_item_xtr1_in_s+'" class="price">%xtr1%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr2_s"  style=" display:none;'+cbar_w0_item_xtr2_s+'">:<span id="cbar_w0_%t%_item_xtr2_in_s" style="'+cbar_w0_item_xtr2_in_s+'">%xtr2%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr3_s"  style="display:none; '+cbar_w0_item_xtr3_s+'">:<span id="cbar_w0_%t%_item_xtr3_in_s"  style="'+cbar_w0_item_xtr3_in_s+'">%xtr3%</span></div>'+
				'</div>'+
				'</div>'+
				'</div>';
		
		//widget footer
		cbar_w_template_bottom[0]='</div></div></div></div>';
}



// Product Page Widget  (exmaple of scrolling widget)

if(cbar_pid && !cbar_oos_page)
{
    
    
       // cbar_widget_show = false;
		
		//cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 768px) {#cbar_widget0 .product-item', 'width:33.33%}');
		//cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 768px) {#cbar_widget1 .product-item', 'width:33.33%}');
	    
		//cbar_temp = cbar_Sizzle(".page-products .products-upsell");
		cbar_temp = cbar_Sizzle(".column.main  .widget.block")
		if(cbar_temp.length)
		{
			cbar_w_anchor[0]=cbar_temp[0];
		}
	
		cbar_w_insert_where[0] 	= 2; 	//determines the position of widget with reference to anchor element possible values 0 = after the anchor, 1= before the anchor, 2= inside the anchor
				 
		cbar_numicons1		 	= 4; 	//tells how many items are actually in the widget	(for first scrolling widget you suffix the the variable with 1, for second widget, suffix with 2)	
		cbar_w_scrollbuttons	= false;	//scrolling widget.
		
		
	    cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 0px) {#cbar_widget0 .product-item', 'padding: 0 15px; margin: 0;}');
	    cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 769px) {#cbar_widget0 .product-item', 'width:25%}'); 
		cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (max-width: 767px) {#cbar_widget0 .product-item', 'width:50%}');	
	    // styles
		cbar_w0_wrap_s				= 'overflow:hidden;';
		cbar_w0_header_s			= '';
		cbar_w0_items_s				= '';
		cbar_w0_item_s				= 'float:left;';
		cbar_w0_item_a_s			= '';
		cbar_w0_item_img_s			= '';
		cbar_w0_item_perc_pur_s		= '';
		cbar_w0_item_perc_pur2_s	= '';
		cbar_w0_item_title_s		= '';
		cbar_w0_item_xtr1_s			= '';
		cbar_w0_item_xtr1_in_s		= '';
		cbar_w0_item_price_s		= '';
		cbar_w0_item_price_in_s		= '';
		cbar_w0_item_xtr2_s			= '';
		cbar_w0_item_xtr2_in_s		= '';
		cbar_w0_item_xtr3_s			= '';
		cbar_w0_item_xtr3_in_s		= '';

		
		
		
		//widget head
		cbar_w_template_head[0]='<div  id="cbar_widget0" style="'+cbar_w0_wrap_s+'" class="">'+
		'<div id="cbar_w0_items_s" style="'+cbar_w0_items_s+'" class="products list items product-items ">';		
				

		//widget items
		cbar_w_item_template[0]='<div id="cbar_w0_%t%_item_s" style="'+cbar_w0_item_s+'" class="item product product-item">'+
				'<div id="cbar_w0_%t%_label_wrapper" class="label-manager-wrapper"></div>'+
				'<div class="product-item-info">'+				
				'<a id="cbar_w0_%t%_item_a_s" style="'+cbar_w0_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product photo product-item-photo">'+				
				'<picture>'+
					'<source  srcset="%picture%?w=296&amp;h=419;&amp;min-w=296&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;ch=Width,DPR 1x, %picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=2&amp;ch=Width,DPR 2x,	%picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=3&amp;ch=Width,DPR 3x" media="(min-width: 280px)">'+
					'<img id="cbar_w0_%t%_item_img_s" style="'+cbar_w0_item_img_s+'" class="photo image" src="" width="242" height="342" alt="">'+
				'</picture>'+				
				'</a>'+				
				'<div  id="cbar_w0_%t%_item_perc_pur_s"  style="display:none; '+cbar_w0_item_perc_pur_s+'">%perc_purchased%% buy:</div>'+ // % purchased this item
				'<div  id="cbar_w0_%t%_item_perc_pur2_s"  style="display:none; '+cbar_w0_item_perc_pur2_s+'">%perc_purchased%% buy the item featured on this page:</div>'+ // % purchased item on this page
				'<strong  id="cbar_w0_%t%_item_title_s"  style="'+cbar_w0_item_title_s+'" class="product name product-item-name"><a id="cbar_w0_%t%_item_a_s" style="'+cbar_w0_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product-item-link">%title%</a></strong>'+
				'<div class="price-box price-final_price">'+
				'<div  id="cbar_w0_%t%_item_price_s"  class= "special-price" style="'+cbar_w0_item_price_s+'"><span id="cbar_w0_%t%_item_price_in_s" style="'+cbar_w0_item_price_in_s+'" class="price bfx-price">%price%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr1_s"  style="display:none; '+cbar_w0_item_xtr1_s+'" class="old-price"><span id="cbar_w0_%t%_item_xtr1_in_s" style="'+cbar_w0_item_xtr1_in_s+'" class="price">%xtr1%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr2_s"  style=" display:none;'+cbar_w0_item_xtr2_s+'">:<span id="cbar_w0_%t%_item_xtr2_in_s" style="'+cbar_w0_item_xtr2_in_s+'">%xtr2%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr3_s"  style="display:none; '+cbar_w0_item_xtr3_s+'">:<span id="cbar_w0_%t%_item_xtr3_in_s"  style="'+cbar_w0_item_xtr3_in_s+'">%xtr3%</span></div>'+
				'</div>'+
				'</div>'+
				'</div>';
		
		//widget footer
		cbar_w_template_bottom[0]='</div></div>';
		
		// second widget
		
		//cbar_temp = cbar_Sizzle(".upsell-recent-wrapper .block-recent .block-content");
		cbar_temp = cbar_Sizzle(".column.main  .widget.block")
		if(cbar_temp.length) 	{
			cbar_w_anchor[1]=cbar_temp[0];
		}
	
		cbar_w_insert_where[1] 	= 2; 	//determines the position of widget with reference to anchor element possible values 0 = after the anchor, 1= before the anchor, 2= inside the anchor
				 
		cbar_numicons2		 	= 4; 	//tells how many items are actually in the widget	(for first scrolling widget you suffix the the variable with 1, for second widget, suffix with 2)	
		cbar_w_scrollbuttons	= false;	//scrolling widget.
		
			
			
		cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 0px) {#cbar_widget1 .product-item', 'padding: 0 15px; margin: 0;}');
	    cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 769px) {#cbar_widget1 .product-item', 'width:25%}'); 
		cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (max-width: 767px) {#cbar_widget1 .product-item', 'width:50%}');	
	    
		// styles
		cbar_w1_wrap_s				= 'overflow:hidden;';
		cbar_w1_header_s			= '';
		cbar_w1_items_s				= '';
		cbar_w1_item_s				= '';
		cbar_w1_item_a_s			= '';
		cbar_w1_item_img_s			= '';
		cbar_w1_item_perc_pur_s		= '';
		cbar_w1_item_perc_pur2_s	= '';
		cbar_w1_item_title_s		= '';
		cbar_w1_item_xtr1_s			= '';
		cbar_w1_item_xtr1_in_s		= '';
		cbar_w1_item_price_s		= '';
		cbar_w1_item_price_in_s		= '';
		cbar_w1_item_xtr2_s			= '';
		cbar_w1_item_xtr2_in_s		= '';
		cbar_w1_item_xtr3_s			= '';
		cbar_w1_item_xtr3_in_s		= '';

		
		
		
		//widget head
		cbar_w_template_head[1]='<div  id="cbar_widget1" style="'+cbar_w1_wrap_s+'" class="page-products">'+
		'<div class="products wrapper grid products-grid products-upsell">'+
		'<div id="cbar_w1_items_s" style="'+cbar_w1_items_s+'" class="products list items product-items">';		
				

		//widget items
		cbar_w_item_template[1]='<div id="cbar_w1_%t%_item_s" style="'+cbar_w1_item_s+'" class="item product product-item">'+
				'<div id="cbar_w1_%t%_label_wrapper" class="label-manager-wrapper"></div>'+
				'<div class="product-item-info">'+				
				'<a id="cbar_w1_%t%_item_a_s" style="'+cbar_w1_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product photo product-item-photo">'+				
				'<picture>'+
					'<source  srcset="%picture%?w=296&amp;h=419&amp;min-w=296&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;ch=Width,DPR 1x, %picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=2&amp;ch=Width,DPR 2x,	%picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=3&amp;ch=Width,DPR 3x">'+
					'<img id="cbar_w1_%t%_item_img_s" style="'+cbar_w1_item_img_s+'" class="photo image" src="" width="242" height="342" alt="">'+
				'</picture>'+									
				'</a>'+				
				'<div  id="cbar_w1_%t%_item_perc_pur_s"  style="display:none; '+cbar_w1_item_perc_pur_s+'">%perc_purchased%% buy:</div>'+ // % purchased this item
				'<div  id="cbar_w1_%t%_item_perc_pur2_s"  style="display:none; '+cbar_w1_item_perc_pur2_s+'">%perc_purchased%% buy the item featured on this page:</div>'+ // % purchased item on this page
				'<strong  id="cbar_w1_%t%_item_title_s"  style="'+cbar_w1_item_title_s+'" class="product name product-item-name"><a id="cbar_w1_%t%_item_a_s" style="'+cbar_w1_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product-item-link">%title%</a></strong>'+
				'<div class="price-box price-final_price">'+
				'<div  id="cbar_w1_%t%_item_price_s"  class= "special-price" style="'+cbar_w1_item_price_s+'"><span id="cbar_w1_%t%_item_price_in_s" style="'+cbar_w1_item_price_in_s+'" class="price bfx-price">%price%</span></div>'+
				'<div  id="cbar_w1_%t%_item_xtr1_s"  style="display:none; '+cbar_w1_item_xtr1_s+'" class="old-price"><span id="cbar_w1_%t%_item_xtr1_in_s" style="'+cbar_w1_item_xtr1_in_s+'" class="price">%xtr1%</span></div>'+
				'<div  id="cbar_w1_%t%_item_xtr2_s"  style=" display:none;'+cbar_w1_item_xtr2_s+'">:<span id="cbar_w1_%t%_item_xtr2_in_s" style="'+cbar_w1_item_xtr2_in_s+'">%xtr2%</span></div>'+
				'<div  id="cbar_w1_%t%_item_xtr3_s"  style="display:none; '+cbar_w1_item_xtr3_s+'">:<span id="cbar_w1_%t%_item_xtr3_in_s"  style="'+cbar_w1_item_xtr3_in_s+'">%xtr3%</span></div>'+
				'</div>'+
				'</div>'+
				'</div>';
		
		//widget footer
		cbar_w_template_bottom[1]='</div></div></div>';
		
		// Third widget
		//cbar_temp = cbar_Sizzle("#cart-success-suggested-products");
		cbar_temp = cbar_Sizzle(".product-info-main .addbag-confirmation-popup")
		if(cbar_temp.length) {
			cbar_w_anchor[2] = cbar_temp[0];
		}
	
		cbar_w_insert_where[2] 	= 2; 	//determines the position of widget with reference to anchor element possible values 0 = after the anchor, 1= before the anchor, 2= inside the anchor
				 
		cbar_numicons3		 	= 4; 	//tells how many items are actually in the widget	(for first scrolling widget you suffix the the variable with 1, for second widget, suffix with 2)	
		cbar_w_scrollbuttons	= false;	//scrolling widget.
		
		cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 768px) {#cbar_widget2 .product-item', 'width:25%}');
	    cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (max-width: 767px) {#cbar_widget2 .product-item', 'width:50%}');	
	    
	    cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 0px) {#cbar_widget2 .product-item', 'padding: 0 15px; margin: 0;}');
	    cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 0px) {#cbar_widget2', 'padding: 0 0.5em 0;}');
	   
	    
	    	
		
		// styles
		cbar_w2_wrap_s				= 'overflow:hidden;margin:30px auto 0px auto;max-width:768px;';
		cbar_w2_header_s			= 'font-family: \'brandongrotesque-bold\';font-weight: 300;text-align:center;font-size:18px;';
		cbar_w2_items_s				= '';
		cbar_w2_item_s				= 'padding:0px 10px;';
		cbar_w2_item_a_s			= '';
		cbar_w2_item_a_s1			= 'font-size: 10px;line-height:1.5';
		cbar_w2_item_img_s			= '';
		cbar_w2_item_perc_pur_s		= '';
		cbar_w2_item_perc_pur2_s	= '';
		cbar_w2_item_title_s		= 'padding-right:3px;';
		cbar_w2_item_xtr1_s			= 'line-height:1';
		cbar_w2_item_xtr1_in_s		= 'font-size:11px';
		cbar_w2_item_price_s		= 'line-height:1';
		cbar_w2_item_price_in_s		= 'font-size:12px';
		cbar_w2_item_xtr2_s			= '';
		cbar_w2_item_xtr2_in_s		= '';
		cbar_w2_item_xtr3_s			= '';
		cbar_w2_item_xtr3_in_s		= '';

		
		
		
		//widget head
		cbar_w_template_head[2]='<div  id="cbar_widget2" style="'+cbar_w2_wrap_s+'" class="block-new-products"><div id="cbar_w2_header_s" style="'+cbar_w2_header_s+'" class=""><strong>YOU MIGHT ALSO LIKE</strong></div>'+
		'<div id="cbar_w2_items_s" style="'+cbar_w2_items_s+'" class="block-content">'+
		'<div class="products-grid grid">'+
		'<div class="products list items product-items">';
		

		//widget items
		cbar_w_item_template[2]='<div id="cbar_w2_%t%_item_s" style="'+cbar_w2_item_s+'" class="item product product-item">'+
				'<div id="cbar_w2_%t%_label_wrapper" class="label-manager-wrapper" style="position: absolute;top: 3px;eft: 15px;"></div>'+
				'<div class="product-item-info">'+				
				'<a id="cbar_w2_%t%_item_a_s" style="'+cbar_w2_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product photo product-item-photo">'+				
				'<picture>'+
					'<source  srcset="%picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;ch=Width,DPR 1x, %picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=2&amp;ch=Width,DPR 2x,	%picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=3&amp;ch=Width,DPR 3x">'+
					'<img id="cbar_w2_%t%_item_img_s" style="'+cbar_w2_item_img_s+'" class="photo image" src="" width="242" height="342" alt="">'+
				'</picture>'+							
				'</a>'+				
				'<div  id="cbar_w2_%t%_item_perc_pur_s"  style="display:none; '+cbar_w2_item_perc_pur_s+'">%perc_purchased%% buy:</div>'+ // % purchased this item
				'<div  id="cbar_w2_%t%_item_perc_pur2_s"  style="display:none; '+cbar_w2_item_perc_pur2_s+'">%perc_purchased%% buy the item featured on this page:</div>'+ // % purchased item on this page
				'<strong  id="cbar_w2_%t%_item_title_s"  style="'+cbar_w2_item_title_s+'" class="product name product-item-name"><a id="cbar_w2_%t%_item_a_s1" style="'+cbar_w2_item_a_s1+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product-item-link">%title%</a></strong>'+
				'<div class = "price-box price-final_price" style = "margin-top:5px;">'+
				'<div  id="cbar_w2_%t%_item_price_s"  class= "special-price" style="'+cbar_w2_item_price_s+'"><span id="cbar_w2_%t%_item_price_in_s" style="'+cbar_w2_item_price_in_s+'" class="price bfx-price">%price%</span></div>'+
				'<div  id="cbar_w2_%t%_item_xtr1_s"  style="display:none; '+cbar_w2_item_xtr1_s+'" class="old-price"><span id="cbar_w2_%t%_item_xtr1_in_s" style="'+cbar_w2_item_xtr1_in_s+'" class="price">%xtr1%</span></div>'+
				'<div  id="cbar_w2_%t%_item_xtr2_s"  style=" display:none;'+cbar_w2_item_xtr2_s+'">:<span id="cbar_w2_%t%_item_xtr2_in_s" style="'+cbar_w2_item_xtr2_in_s+'">%xtr2%</span></div>'+
				'<div  id="cbar_w2_%t%_item_xtr3_s"  style="display:none; '+cbar_w2_item_xtr3_s+'">:<span id="cbar_w2_%t%_item_xtr3_in_s"  style="'+cbar_w2_item_xtr3_in_s+'">%xtr3%</span></div>'+
				'</div>'+
				'</div>'+
				'</div>';
		
		//widget footer
		cbar_w_template_bottom[2]='</div></div></div></div>';
	

}//product page widget end


// Shopping Cart Widget
if (cbar_url.toLowerCase().search('checkout/cart')>-1){

		cbar_widget_show = false;

	   cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 769px) {#cbar_widget0 .product-item', 'width:25%}');
	   cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (max-width: 768px) {#cbar_widget0 .product-item', 'width:50%}');
				
		cbar_temp = cbar_Sizzle(".cart-bottom-products-grid-headings");
		if(cbar_temp.length)
		{
			cbar_w_anchor[0]=cbar_temp[0];
		}
	
		cbar_w_insert_where[0] 	= 0; 	//determines the position of widget with reference to anchor element possible values 0 = after the anchor, 1= before the anchor, 2= inside the anchor
				 
		cbar_numicons1		 	= 4; 	//tells how many items are actually in the widget	(for first scrolling widget you suffix the the variable with 1, for second widget, suffix with 2)	
		cbar_w_scrollbuttons	= false;	//scrolling widget.
		
			
			
		
		// styles
		cbar_w0_wrap_s				= '';
		cbar_w0_header_s			= '';
		cbar_w0_items_s				= '';
		cbar_w0_item_s				= '';
		cbar_w0_item_a_s			= '';
		cbar_w0_item_img_s			= '';
		cbar_w0_item_perc_pur_s		= '';
		cbar_w0_item_perc_pur2_s	= '';
		cbar_w0_item_title_s		= '';
		cbar_w0_item_xtr1_s			= '';
		cbar_w0_item_xtr1_in_s		= '';
		cbar_w0_item_price_s		= '';
		cbar_w0_item_price_in_s		= '';
		cbar_w0_item_xtr2_s			= '';
		cbar_w0_item_xtr2_in_s		= '';
		cbar_w0_item_xtr3_s			= '';
		cbar_w0_item_xtr3_in_s		= '';

		
		
		
		//widget head
		cbar_w_template_head[0]='<div  id="cbar_widget0" style="'+cbar_w0_wrap_s+'">'+
		'<div id="cbar_w0_items_s" style="'+cbar_w0_items_s+'" class="block-content">'+
		'<div class="products-grid grid">'+
		'<div class="products list items product-items">';
		

		//widget items
		cbar_w_item_template[0]='<div id="cbar_w0_%t%_item_s" style="'+cbar_w0_item_s+'" class="item product product-item">'+
				'<div id="cbar_w0_%t%_label_wrapper" class="label-manager-wrapper"></div>'+
				'<div class="product-item-info">'+				
				'<a id="cbar_w0_%t%_item_a_s" style="'+cbar_w0_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product photo product-item-photo">'+				
				'<picture>'+
					'<source  srcset="%picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;ch=Width,DPR 1x, %picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=2&amp;ch=Width,DPR 2x,	%picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=3&amp;ch=Width,DPR 3x">'+
					'<img id="cbar_w0_%t%_item_img_s" style="'+cbar_w0_item_img_s+'" class="photo image" src="" width="242" height="342" alt="">'+
				'</picture>'+							
				'</a>'+				
				'<div  id="cbar_w0_%t%_item_perc_pur_s"  style="display:none; '+cbar_w0_item_perc_pur_s+'">%perc_purchased%% buy:</div>'+ // % purchased this item
				'<div  id="cbar_w0_%t%_item_perc_pur2_s"  style="display:none; '+cbar_w0_item_perc_pur2_s+'">%perc_purchased%% buy the item featured on this page:</div>'+ // % purchased item on this page
				'<strong  id="cbar_w0_%t%_item_title_s"  style="'+cbar_w0_item_title_s+'" class="product name product-item-name"><a id="cbar_w0_%t%_item_a_s" style="'+cbar_w0_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product-item-link">%title%</a></strong>'+
				'<div class="price-box price-final_price">'+
				'<div  id="cbar_w0_%t%_item_price_s"  class= "price-container price-final_price tax weee" style="'+cbar_w0_item_price_s+'"><span id="cbar_w0_%t%_item_price_in_s" style="'+cbar_w0_item_price_in_s+'" class="price bfx-price">%price%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr1_s"  style="display:none; '+cbar_w0_item_xtr1_s+'" class="old-price"><span id="cbar_w0_%t%_item_xtr1_in_s" style="'+cbar_w0_item_xtr1_in_s+'" class="price">%xtr1%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr2_s"  style=" display:none;'+cbar_w0_item_xtr2_s+'">:<span id="cbar_w0_%t%_item_xtr2_in_s" style="'+cbar_w0_item_xtr2_in_s+'">%xtr2%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr3_s"  style="display:none; '+cbar_w0_item_xtr3_s+'">:<span id="cbar_w0_%t%_item_xtr3_in_s"  style="'+cbar_w0_item_xtr3_in_s+'">%xtr3%</span></div>'+
				'</div>'+
				'</div>'+
				'</div>';
		
		//widget footer
		cbar_w_template_bottom[0]='</div></div></div></div>';

}//shopping cart widget end



// Account page recs(loggedIn users)
var cbar_temp = cbar_Sizzle('div[aria-labelledby="block-recent-heading"]');
if( cbar_dev_site && cbar_url.toLowerCase().search('/customer/account') > -1 && cbar_temp.length > 0 )
{
	
	cbar_other = true;
	
	cbar_flow = "O0:1,1,3";
	
	
	
	cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 1366px) {#cbar_widget0 .cbar-item', 'width:25%}');	
	
	cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 1366px) {#cbar_widget0 .cbar-item:nth-of-type(1n+4)', 'display: block !important;}');	

	cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 1024px) {#cbar_widget0 .cbar-item', 'width:33.3333%}');	
	
	cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 768px) {#cbar_widget0 .cbar-item .product-item-name', 'width:60%;padding-right: 10px;margin: 5px 0;height: 35px;}');	
	
	cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 768px) {#cbar_widget0 .cbar-item .price-box', 'width:40%;margin: 5px 0;    float: left;text-align: right;height: 50px;}');	
	
	cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 768px) {#cbar_widget0 .cbar-item .price-box .cbar-price', 'font-family: brandongrotesque-bold;}');

	cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 768px) {#cbar_widget0 .cbar-item:nth-of-type(1n+4)', 'display: none !important;}');	

	cbar_mq_addCSSRule(cbar_mq_css,'#cbar_widget0 .cbar-item', 'width: 50%;float: left;');
	cbar_mq_addCSSRule(cbar_mq_css,'#cbar_widget0 .cbar-item .product-item-name', 'width: 100%;height: 40px;line-height: 18px;margin: 0;');
	cbar_mq_addCSSRule(cbar_mq_css,'#cbar_widget0 .cbar-item .price-box', 'margin: 5px 0 1px;width: 100%;text-align: left;');
	cbar_mq_addCSSRule(cbar_mq_css,'#cbar_widget0 .cbar-item .price-box .cbar-price', 'font-family: caecilialtpro-85heavy;');
	

	
	var cbar_temp = cbar_Sizzle('div[aria-labelledby="block-recent-heading"]');
	if(cbar_temp.length)
	{
		cbar_w_anchor[0] = cbar_temp[0];
	}

	cbar_w_insert_where[0] 	= 2;
	cbar_numicons1		 	= 4;
	cbar_w_scrollbuttons	= false;	//scrolling widget.
	
		
	// styles
	cbar_w0_wrap_s				= 'overflow:hidden;';
	cbar_w0_header_s			= '';
	cbar_w0_items_s				= '';
	cbar_w0_item_s				= '';
	cbar_w0_item_a_s			= '';
	cbar_w0_item_img_s			= '';
	cbar_w0_item_perc_pur_s		= '';
	cbar_w0_item_perc_pur2_s	= '';
	cbar_w0_item_title_s		= '';
	cbar_w0_item_xtr1_s			= '';
	cbar_w0_item_xtr1_in_s		= 'padding-left: 10px;';
	cbar_w0_item_price_s		= 'margin-bottom: 2px;';
	cbar_w0_item_price_in_s		= '';
	cbar_w0_item_xtr2_s			= '';
	cbar_w0_item_xtr2_in_s		= '';
	cbar_w0_item_xtr3_s			= '';
	cbar_w0_item_xtr3_in_s		= '';

	
	
	
	//widget head
	cbar_w_template_head[0]='<div  id="cbar_widget0" style="'+cbar_w0_wrap_s+'" class="">'+
	'<div id="cbar_w0_items_s" style="'+cbar_w0_items_s+'" class="products list items product-items">';		
			

	//widget items
	cbar_w_item_template[0]='<div id="cbar_w0_%t%_item_s" style="'+cbar_w0_item_s+'" class="cbar-item item product product-item">'+
			'<div id="cbar_w0_%t%_label_wrapper" class="label-manager-wrapper"></div>'+
			'<div class="product-item-info">'+				
			'<a id="cbar_w0_%t%_item_a_s" style="'+cbar_w0_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product photo product-item-photo">'+				
			'<picture>'+
				'<source  srcset="%picture%?w=296&amp;h=419;&amp;min-w=296&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;ch=Width,DPR 1x, %picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=2&amp;ch=Width,DPR 2x,	%picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=3&amp;ch=Width,DPR 3x" media="(min-width: 280px)">'+
				'<img id="cbar_w0_%t%_item_img_s" style="'+cbar_w0_item_img_s+'" class="photo image" src="" width="242" height="342" alt="">'+
			'</picture>'+				
			'</a>'+				
			'<div  id="cbar_w0_%t%_item_perc_pur_s"  style="display:none; '+cbar_w0_item_perc_pur_s+'">%perc_purchased%% buy:</div>'+ // % purchased this item
			'<div  id="cbar_w0_%t%_item_perc_pur2_s"  style="display:none; '+cbar_w0_item_perc_pur2_s+'">%perc_purchased%% buy the item featured on this page:</div>'+ // % purchased item on this page
			'<strong  id="cbar_w0_%t%_item_title_s"  style="'+cbar_w0_item_title_s+'" class="product name product-item-name"><a id="cbar_w0_%t%_item_a_s" style="'+cbar_w0_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product-item-link">%title%</a></strong>'+
			'<div class="price-box price-final_price">'+
			
			'<div  id="cbar_w0_%t%_item_price_s"  class= "special-price" style="'+cbar_w0_item_price_s+'"><span id="cbar_w0_%t%_item_price_in_s" style="'+cbar_w0_item_price_in_s+'" class="price bfx-price cbar-price">%price%</span></div>'+
			
			'<div  id="cbar_w0_%t%_item_xtr1_s"  style="display:none; '+cbar_w0_item_xtr1_s+'" class="old-price"><span id="cbar_w0_%t%_item_xtr1_in_s" style="'+cbar_w0_item_xtr1_in_s+'" class="price">%xtr1%</span></div>'+
			
			'<div  id="cbar_w0_%t%_item_xtr2_s"  style=" display:none;'+cbar_w0_item_xtr2_s+'">:<span id="cbar_w0_%t%_item_xtr2_in_s" style="'+cbar_w0_item_xtr2_in_s+'">%xtr2%</span></div>'+
			'<div  id="cbar_w0_%t%_item_xtr3_s"  style="display:none; '+cbar_w0_item_xtr3_s+'">:<span id="cbar_w0_%t%_item_xtr3_in_s"  style="'+cbar_w0_item_xtr3_in_s+'">%xtr3%</span></div>'+
			'</div>'+
			'</div>'+
			'</div>';
	
	//widget footer
	cbar_w_template_bottom[0]='</div></div>';

	
}

//Category Page Widget
if(cbar_cid && !cbar_pid){

		cbar_widget_show = false;

		//cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 768px) {#cbar_widget0 .product-item', 'width:33.33%}');
	    cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (max-width: 767px) {#cbar_widget0 .product-item', 'width:50%}');	
		//cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 768px) {#cbar_widget1 .product-item', 'width:33.33%}');
	    cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (max-width: 767px) {#cbar_widget1 .product-item', 'width:50%}');	
		
		cbar_temp = cbar_Sizzle(".top-toolbar-with-breadcrumb");
		
		
		if(cbar_temp.length)
		{
			cbar_w_anchor[0]=cbar_temp[0];
		}
	
		cbar_w_insert_where[0] 	= 1; 	//determines the position of widget with reference to anchor element possible values 0 = after the anchor, 1= before the anchor, 2= inside the anchor
				 
		cbar_numicons1		 	= 4; 	//tells how many items are actually in the widget	(for first scrolling widget you suffix the the variable with 1, for second widget, suffix with 2)	
		cbar_w_scrollbuttons	= false;	//scrolling widget.
		
			
			
		
		// styles
		cbar_w0_wrap_s				= 'overflow:hidden;width:100%;margin-top:20px;';
		cbar_w0_header_s			= 'font-family: brandongrotesque-bold;font-weight: 300;font-size: 1.6rem;color: #000;text-transform: uppercase;text-align: center;';
		cbar_w0_items_s				= 'margin: 30px 0px 0px;';
		cbar_w0_item_s				= '';
		cbar_w0_item_a_s			= '';
		cbar_w0_item_img_s			= '';
		cbar_w0_item_perc_pur_s		= '';
		cbar_w0_item_perc_pur2_s	= '';
		cbar_w0_item_title_s		= '';
		cbar_w0_item_xtr1_s			= '';
		cbar_w0_item_xtr1_in_s		= '';
		cbar_w0_item_price_s		= '';
		cbar_w0_item_price_in_s		= '';
		cbar_w0_item_xtr2_s			= '';
		cbar_w0_item_xtr2_in_s		= '';
		cbar_w0_item_xtr3_s			= '';
		cbar_w0_item_xtr3_in_s		= '';

		
		
		
		//widget head
		cbar_w_template_head[0]='<div  id="cbar_widget0" style="'+cbar_w0_wrap_s+'" class=""><div id="cbar_w0_header_s" style="'+cbar_w0_header_s+'" class="block-title">%group_title%</div>'+
		'<div id="cbar_w0_items_s" style="'+cbar_w0_items_s+'" class="products list items product-items products-grid">';		
				

		//widget items
		cbar_w_item_template[0]='<div id="cbar_w0_%t%_item_s" style="'+cbar_w0_item_s+'" class="item product product-item">'+
				'<div id="cbar_w0_%t%_label_wrapper" class="label-manager-wrapper"></div>'+
				'<div class="product-item-info">'+				
				'<a id="cbar_w0_%t%_item_a_s" style="'+cbar_w0_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product photo product-item-photo">'+				
				'<picture>'+
					'<source  srcset="%picture%?w=296&amp;h=419;&amp;min-w=296&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;ch=Width,DPR 1x, %picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=2&amp;ch=Width,DPR 2x,	%picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=3&amp;ch=Width,DPR 3x" media="(min-width: 280px)">'+
					'<img id="cbar_w0_%t%_item_img_s" style="'+cbar_w0_item_img_s+'" class="photo image" src="" width="242" height="342" alt="">'+
				'</picture>'+				
				'</a>'+				
				'<div  id="cbar_w0_%t%_item_perc_pur_s"  style="display:none; '+cbar_w0_item_perc_pur_s+'">%perc_purchased%% buy:</div>'+ // % purchased this item
				'<div  id="cbar_w0_%t%_item_perc_pur2_s"  style="display:none; '+cbar_w0_item_perc_pur2_s+'">%perc_purchased%% buy the item featured on this page:</div>'+ // % purchased item on this page
				'<strong  id="cbar_w0_%t%_item_title_s"  style="'+cbar_w0_item_title_s+'" class="product name product-item-name"><a id="cbar_w0_%t%_item_a_s" style="'+cbar_w0_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product-item-link">%title%</a></strong>'+
				'<div class="price-box price-final_price">'+
				'<div  id="cbar_w0_%t%_item_price_s"  class= "special-price" style="'+cbar_w0_item_price_s+'"><span id="cbar_w0_%t%_item_price_in_s" style="'+cbar_w0_item_price_in_s+'" class="price bfx-price">%price%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr1_s"  style="display:none; '+cbar_w0_item_xtr1_s+'" class="old-price"><span id="cbar_w0_%t%_item_xtr1_in_s" style="'+cbar_w0_item_xtr1_in_s+'" class="price">%xtr1%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr2_s"  style=" display:none;'+cbar_w0_item_xtr2_s+'">:<span id="cbar_w0_%t%_item_xtr2_in_s" style="'+cbar_w0_item_xtr2_in_s+'">%xtr2%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr3_s"  style="display:none; '+cbar_w0_item_xtr3_s+'">:<span id="cbar_w0_%t%_item_xtr3_in_s"  style="'+cbar_w0_item_xtr3_in_s+'">%xtr3%</span></div>'+
				'</div>'+
				'</div>'+
				'</div>';
		
		//widget footer
		cbar_w_template_bottom[0]='</div></div>';
}

//Search Page Widget
if(cbar_search){

		cbar_widget_show = false;

		//cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 768px) {#cbar_widget0 .product-item', 'width:33.33%}');
	    cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (max-width: 767px) {#cbar_widget0 .product-item', 'width:50%}');	
		//cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (min-width: 768px) {#cbar_widget1 .product-item', 'width:33.33%}');
	    cbar_mq_addCSSRule(cbar_mq_css,'@media only screen and (max-width: 767px) {#cbar_widget1 .product-item', 'width:50%}');	
		
		cbar_temp = cbar_Sizzle(".bottom-toolbar");
		
		
		if(cbar_temp.length)
		{
			cbar_w_anchor[0]=cbar_temp[0];
		}
	
		cbar_w_insert_where[0] 	= 0; 	//determines the position of widget with reference to anchor element possible values 0 = after the anchor, 1= before the anchor, 2= inside the anchor
				 
		cbar_numicons1		 	= 4; 	//tells how many items are actually in the widget	(for first scrolling widget you suffix the the variable with 1, for second widget, suffix with 2)	
		cbar_w_scrollbuttons	= false;	//scrolling widget.
		
			
			
		
		// styles
		cbar_w0_wrap_s				= 'overflow:hidden;';
		cbar_w0_header_s			= 'font-family: brandongrotesque-bold;font-weight: 300;font-size: 1.6rem;color: #000;width: 255px;text-transform: uppercase;text-align: center;';
		cbar_w0_items_s				= '';
		cbar_w0_item_s				= '';
		cbar_w0_item_a_s			= '';
		cbar_w0_item_img_s			= '';
		cbar_w0_item_perc_pur_s		= '';
		cbar_w0_item_perc_pur2_s	= '';
		cbar_w0_item_title_s		= '';
		cbar_w0_item_xtr1_s			= '';
		cbar_w0_item_xtr1_in_s		= '';
		cbar_w0_item_price_s		= '';
		cbar_w0_item_price_in_s		= '';
		cbar_w0_item_xtr2_s			= '';
		cbar_w0_item_xtr2_in_s		= '';
		cbar_w0_item_xtr3_s			= '';
		cbar_w0_item_xtr3_in_s		= '';

		
		
		
		//widget head
		cbar_w_template_head[0]='<div  id="cbar_widget0" style="'+cbar_w0_wrap_s+'" class=""><div id="cbar_w0_header_s" style="'+cbar_w0_header_s+'" class="block-title">%group_title%</div>'+
		'<div id="cbar_w0_items_s" style="'+cbar_w0_items_s+'" class="products list items product-items products-grid">';		
				

		//widget items
		cbar_w_item_template[0]='<div id="cbar_w0_%t%_item_s" style="'+cbar_w0_item_s+'" class="item product product-item">'+
				'<div id="cbar_w0_%t%_label_wrapper" class="label-manager-wrapper"></div>'+
				'<div class="product-item-info">'+				
				'<a id="cbar_w0_%t%_item_a_s" style="'+cbar_w0_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product photo product-item-photo">'+				
				'<picture>'+
					'<source  srcset="%picture%?w=296&amp;h=419;&amp;min-w=296&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;ch=Width,DPR 1x, %picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=2&amp;ch=Width,DPR 2x,	%picture%?w=296&amp;h=419&amp;auto=format,compress&amp;q=75&amp;bg=ffffff&amp;fm=jpg&amp;rect=440,0,2120,3000&amp;auto=format,compress&amp;q=75&amp;dpr=3&amp;ch=Width,DPR 3x" media="(min-width: 280px)">'+
					'<img id="cbar_w0_%t%_item_img_s" style="'+cbar_w0_item_img_s+'" class="photo image" src="" width="242" height="342" alt="">'+
				'</picture>'+				
				'</a>'+				
				'<div  id="cbar_w0_%t%_item_perc_pur_s"  style="display:none; '+cbar_w0_item_perc_pur_s+'">%perc_purchased%% buy:</div>'+ // % purchased this item
				'<div  id="cbar_w0_%t%_item_perc_pur2_s"  style="display:none; '+cbar_w0_item_perc_pur2_s+'">%perc_purchased%% buy the item featured on this page:</div>'+ // % purchased item on this page
				'<strong  id="cbar_w0_%t%_item_title_s"  style="'+cbar_w0_item_title_s+'" class="product name product-item-name"><a id="cbar_w0_%t%_item_a_s" style="'+cbar_w0_item_a_s+'"  onclick="return cbar_click3(this, \'%url%\', %rectype%, %idx%,\'%pid%\');" href="%url%" class="product-item-link">%title%</a></strong>'+
				'<div class="price-box price-final_price">'+
				'<div  id="cbar_w0_%t%_item_price_s"  class= "special-price" style="'+cbar_w0_item_price_s+'"><span id="cbar_w0_%t%_item_price_in_s" style="'+cbar_w0_item_price_in_s+'" class="price bfx-price">%price%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr1_s"  style="display:none; '+cbar_w0_item_xtr1_s+'" class="old-price"><span id="cbar_w0_%t%_item_xtr1_in_s" style="'+cbar_w0_item_xtr1_in_s+'" class="price">%xtr1%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr2_s"  style=" display:none;'+cbar_w0_item_xtr2_s+'">:<span id="cbar_w0_%t%_item_xtr2_in_s" style="'+cbar_w0_item_xtr2_in_s+'">%xtr2%</span></div>'+
				'<div  id="cbar_w0_%t%_item_xtr3_s"  style="display:none; '+cbar_w0_item_xtr3_s+'">:<span id="cbar_w0_%t%_item_xtr3_in_s"  style="'+cbar_w0_item_xtr3_in_s+'">%xtr3%</span></div>'+
				'</div>'+
				'</div>'+
				'</div>';
		
		//widget footer
		cbar_w_template_bottom[0]='</div></div>';



}

function cbar_check_ref(domain) { // example : xxxxxxxx.com    
	var cbar_temp_ref = '';
	var regex = /([^\?]*)/;
	var result = regex.exec(document.referrer); // Remove parameters
	if ( result!=null && result[1]!=null ) 
		cbar_temp_ref = result[1];
	else
		cbar_temp_ref = document.referrer;
	if (cbar_temp_ref.search(domain) == -1) {
		cbar_ro=true;
		return 1; // Didn't come from the domain
	}
	else return 0; // Came from the domain
}

